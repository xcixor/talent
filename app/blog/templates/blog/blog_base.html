{% extends 'common/base.html' %}
{% block title %}About{% endblock %}
{% load static %}
{% block styles %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/blog/common.css' %}">
<link rel="stylesheet" href="{% static 'css/blog/post_list.css' %}">
{% endblock %}
{% block content %}
<section class="container py-4">
    <div class="row search-form">
        <div class="col s12">
            <div class="d-flex">
                <form action="{% url 'blog:blog_search' %}" method="get" class="d-flex flex-1">
                    <input class="text-input" type="text" placeholder="M-pesa, E-commerce, Blog ..." name="blog_search"
                        value="{{request.session.blog_search}}">
                    <button type="submit" id="searchBtn" class="btn btn-primary"><i
                            class="fa-solid fa-magnifying-glass"></i></button>
                </form>
                {% if request.session.blog_search %}
                <form method="get" style="min-height: 100%;" action="{% url 'blog:clear_search' %}">
                    <button type="submit" class="btn btn-primary"><i class="fa-solid fa-xmark"
                            title="clear sort"></i></button>
                </form>
                {% endif %}
            </div>

        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <header class="">
                <h3 class="text-primary bg-primary-light-10 p-2">Articles</h3>
            </header>
            {% for post in posts %}
            <div class="post d-flex">
                <div class="image">
                    <img src="{{post.image.url}}" alt="{{post}}" height="100%" width="100%">
                </div>
                <div class="content p-2">
                    <a class="undecorated text-secondary m-tb-20" href="{% url 'blog:post_detail' post.slug %}">
                        <h4 class="m-0">{{post}}</h4>
                    </a>
                    <p class="muted m-tb-20">{{ post.created_on }} / {{post.read_time}}</p>
                    <span class="epigraph m-tb-40">
                        {% autoescape off %}
                        {{ post.epigraph|safe }}
                        {% endautoescape %}
                    </span>
                    <a class="undecorated text-secondary m-tb-20" href="{% url 'blog:post_detail' post.slug %}">Read
                        Article <i class="fa-solid fa-angles-right"></i></a>
                </div>
            </div>
            {% empty %}
            <p>Hmm..nothing here ðŸ¤”</p>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}